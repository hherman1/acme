#!/bin/sh
# godoc but more navigable with acme
if [ -n "$2" ]; then
	cd $2
fi
PKG=$(echo $1 | sed -E  "s/^([a-zA-Z]+).*$/\1/")
STRUCT=$(echo $1 | sed -n -E "s/$PKG\.([a-zA-Z]+).*$/\1/p")
if [ -n "$STRUCT" ]; then
	go doc $1 | sed -E "s/$STRUCT/$PKG.$STRUCT/" | page
else
	go doc $1 | sed -E "s/(type|func) ([a-zA-Z]+)/\1 $PKG.\2/" | page
fi